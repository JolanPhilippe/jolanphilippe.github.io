\begin{tikzpicture}

    \node[] (vm1tmp) {VM 1};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of vm1tmp] (appBVMtmp) {};
    \node[minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of appBVMtmp] (appAVMtmp) {};
    \node[minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.3cm of appAVMtmp] (binlibsVM1tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of binlibsVM1tmp] (os1tmp) {};
    
    \node[draw, fit=(vm1tmp)(os1tmp), inner sep=3pt, fill=brightlavender] (vm1box) {};

    \node[] (vm1) {VM 1};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, below=0.15cm of vm1, minimum width=2cm, fill=apricot] (appBVM) {app B};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of appBVM, fill=apricot] (appAVM) {app A};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.3cm of appAVM, fill=celadon] (binlibsVM1) {bin/libs};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of binlibsVM1, fill=celadon] (os1) {guest OS};

    % ------------------------------------

     \node[right=1.5cm of vm1tmp] (vm2tmp) {VM 2};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of vm2tmp] (appDVMtmp) {};
    \node[minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of appDVMtmp] (appCVMtmp) {};
    \node[minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.3cm of appCVMtmp] (binlibsVM2tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of binlibsVM2tmp] (os2tmp) {};
    
    \node[draw, fit=(vm2tmp)(os2tmp), inner sep=3pt, fill=brightlavender] (vm2box) {};

    \node[right=1.5cm of vm1] (vm2) {VM 2};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, below=0.15cm of vm2, minimum width=2cm, fill=apricot] (appDVM) {app D};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of appDVM, fill=apricot] (appCVM) {app C};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.3cm of appCVM, fill=celadon] (binlibsVM2) {bin/libs};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of binlibsVM2, fill=celadon] (os2) {guest OS};
    
    % ------------------------------------
    \node[fit=(vm2box)(vm1box), inner sep=3pt] (vmboxes) {};
    \node[draw, below=0.05cm of vmboxes, minimum height=0.6cm, rounded corners=2, minimum width=4.8cm, fill=blizzardblue] (vmhypervisor) {Hypervisor};
    \node[draw, below=0.05cm of vmhypervisor, minimum height=0.6cm, rounded corners=2, minimum width=4.8cm, fill=celadon] (vmos) {host OS};
    \node[below=0.2cm of vmos] (vmlabel) {bare metal machine};
    \node[draw, fit=(vm2box)(vm1box)(vmlabel), inner sep=3pt] (baremetalmachine) {};
    \node[below=0.2cm of baremetalmachine] () {\large VMs avec un hyperviseur};
    
    % ------------------------------------
    
    \node[minimum height=0.6cm, minimum width=2cm, below=-0.18cm of appCVM, xshift=2.75cm] (appAconttmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, above=0.15cm of appAconttmp] (cont1tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of appAconttmp] (binlibscont1tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of binlibscont1tmp] (os1conttmp) {};
    \node[draw, fit=(cont1tmp)(os1conttmp), inner sep=3pt, fill=brightlavender] (cont1box) {};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=-0.18cm of appCVM, xshift=2.75cm, fill=apricot] (appAcont) {app A};
    \node[minimum height=0.6cm, rounded corners=2, minimum width=2cm, above=0.15cm of appAcont] (cont1) {container 1};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of appAcont, fill=celadon] (binlibscont1) {bin/libs};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of binlibscont1, fill=celadon] (os1cont) {\footnotesize minimal OS};

    
    \node[minimum height=0.6cm, minimum width=2cm, right=0.3cm of appAcont] (appBconttmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, above=0.15cm of appBconttmp] (cont2tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of appBconttmp] (binlibscont2tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of binlibscont2tmp] (os2conttmp) {};
    \node[draw, fit=(cont2tmp)(os2conttmp), inner sep=3pt, fill=brightlavender] (cont2box) {};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm,  right=0.3cm of appAcont, fill=apricot] (appBcont) {app B};
    \node[minimum height=0.6cm, rounded corners=2, minimum width=2cm, above=0.15cm of appBcont] (cont2) {container 2};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of appBcont, fill=celadon] (binlibscont2) {bin/libs};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of binlibscont2, fill=celadon] (os2cont) {\footnotesize minimal OS};

     
    \node[minimum height=0.6cm, minimum width=2cm, right=0.3cm of appBcont] (appCconttmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, above=0.15cm of appCconttmp] (cont3tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of appCconttmp] (binlibscont3tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of binlibscont3tmp] (os3conttmp) {};
    \node[draw, fit=(cont3tmp)(os3conttmp), inner sep=3pt, fill=brightlavender] (cont3box) {};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm,  right=0.3cm of appBcont, fill=apricot] (appCcont) {app C};
    \node[minimum height=0.6cm, rounded corners=2, minimum width=2cm, above=0.15cm of appCcont] (cont3) {container 3};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of appCcont, fill=celadon] (binlibscont3) {bin/libs};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of binlibscont3, fill=celadon] (os3cont) {\footnotesize minimal OS};

     
    \node[minimum height=0.6cm, minimum width=2cm, right=0.3cm of appCcont] (appDconttmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, above=0.15cm of appDconttmp] (cont4tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of appDconttmp] (binlibscont4tmp) {};
    \node[minimum height=0.6cm, minimum width=2cm, below=0.15cm of binlibscont4tmp] (os4conttmp) {};
    \node[draw, fit=(cont4tmp)(os4conttmp), inner sep=3pt, fill=brightlavender] (cont4box) {};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm,  right=0.3cm of appCcont, fill=apricot] (appDcont) {app D};
    \node[minimum height=0.6cm, rounded corners=2, minimum width=2cm, above=0.15cm of appDcont] (cont4) {container 4};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of appDcont, fill=celadon] (binlibscont4) {bin/libs};
    \node[draw, rectangle, minimum height=0.6cm, rounded corners=2, minimum width=2cm, below=0.15cm of binlibscont4, fill=celadon] (os4cont) {\footnotesize minimal OS};

    \node[fit=(cont1box) (cont4box)] (allcontbox) {};
    
    \node[draw, below=0.05cm of allcontbox, minimum height=0cm, rounded corners=2, minimum width=9.2cm, fill=blizzardblue] (conthypervisor) {\small container engine};
    \node[draw, below=0.05cm of conthypervisor, minimum height=0.6cm, rounded corners=2, minimum width=9.2cm, fill=celadon] (contos) {host OS};
    
    \node[below=0.0cm of contos] (allcontL) {bare metal machine};
    \node[draw, rectangle, fit=(allcontbox) (allcontL), inner sep=3pt] (containers) {};
    
    \node[below=0.2cm of allcontL] () {\large Containers};
    
\end{tikzpicture}